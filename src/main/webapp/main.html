<!DOCTYPE html>
<html lang="GB18030">
<head>
    <meta charset="GB18030">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>首页</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/main.css">

    <style type="text/css">
        #box{
            width:1519px;
            height:500px;
            border:1px solid black;
            position:relative;
            overflow:hidden;
        }
        #1{
            background-position:100%;
            width:1000px;
            height: 800px;
        }
        #2{
            background-position:100%;
            width:1000px;
            height: 800px;
        }
        #3{
            background-position:100%;
            width:1000px;
            height: 800px;
        }
        .slide{
            width:1000px;
            height:800px;
            position:absolute;
        }
        img{
            display: block;
            max-width: 100%;
            height: auto;
        }
        #content {
            width: 1470px;
            height: 350px;
            display: -webkit-flex;
            /*display: flex;
            display: inline-flex;*/
            justify-content: space-around;
        }
        #content1 {
            width: 1470px;
            height: 350px;
            display: -webkit-flex;
            /*display: flex;
            display: inline-flex;*/
            justify-content: space-around;
        }
        .img_room {
            width: 300px;
            height: 250px;
        }
    </style>
    <script type="text/javascript">
        onload=function(){
            var arr = document.getElementsByClassName("slide");
            for(var i=0;i<arr.length;i++){
                arr[i].style.left = i*1000+"px";
            }
        };
        function LeftMove(){
            var arr = document.getElementsByClassName("slide");//获取三个子div
            for(var i=0;i<arr.length;i++){
                var left = parseFloat(arr[i].style.left);
                left-=1;
                var width = 1000;//图片的宽度
                if(left<=-width){
                    left=(arr.length-1)*width;//当图片完全走出显示框，拼接到末尾
                    clearInterval(moveId);
                }
                arr[i].style.left = left+"px";
            }
        }
        function divInterval(){
            moveId=setInterval(LeftMove,10);//设置一个10毫秒定时器
        }
        timeId=setInterval(divInterval,9000);//设置一个10秒的定时器。
        function stop(){
            clearInterval(timeId);
        }
        function start(){
            clearInterval(timeId);
            timeId=setInterval(divInterval,9000);
        }
        //页面失去焦点停止
        onblur = function(){
            stop();
        };
        //页面获取焦点时开始
        onfocus = function(){
            start();
        }
    </script>
</head>
<body>
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <div><a class="navbar-brand" style="font-size:32px;" href="#">名宿</a></div>
        </div>
        <div class="navbar-collapse collapse">
            <a class="navbar-brand" href="main.html">首页</a>
            <a class="navbar-brand" href="login.html">登录</a>
            <a class="navbar-brand" href="reg.html">注册</a>
            <a class="navbar-brand" href="userinfo.html">个人信息</a>
            <a class="navbar-brand" href="house_info.html">出租房源</a>
        </div>
    </div>
</nav>
<div>
    <div id="box" onmouseover="stop()" onmouseout="start()" align="center">
        <div id="1" class="slide">
            <img src="images/lunbo1.jpg" alt="1">
        </div>
        <div id="2" class="slide">
            <img src="images/lunbo2.jpg" alt="2">
        </div>
        <div id="3" class="slide">
            <img src="images/lunbo3.jpg" alt="3">
        </div>
    </div>
    <div style="height: 20px"></div>
    <div style="height: 50px" >
        <form class="form-inline" role="form" style="float:left;">
            <div class="form-group has-feedback">
                <div class="input-group">
                    <div class="input-group-addon">城市</div>
                    <input class="form-control has-success" type="text" placeholder="请输入查询城市" id="cityInput">
                    <div class="input-group-addon">民宿类型</div>
                    <select class="form-control has-success" type="text" placeholder="请输入查询名宿类型" id="h_typeInput">
                        <option   value=""></option>
                        <option   value="公寓型住宅">公寓型住宅</option>
                        <option  value="独栋房">独栋房</option>
                        <option   value="Loft">Loft</option>
                        <option  value="酒店">酒店</option>
                        <option   value="酒店式公寓">酒店式公寓</option>
                        <option  value="精品酒店">精品酒店</option>
                        <option   value="青年旅舍">青年旅舍</option>
                        <option  value="农家乐">农家乐</option>
                        <option   value="度假村">度假村</option>
                        <option  value="乡村小屋">乡村小屋</option>
                        <option   value="客栈">客栈</option>
                        <option  value="蒙古包">蒙古包</option>
                        <option   value="平房">平房</option>
                        <option  value="联排别墅">联排别墅</option>
                        <option   value="木屋">木屋</option>
                        <option  value="房车">房车</option>
                        <option  value="帐篷">帐篷</option>
                        <option   value="露营地">露营地</option>
                        <option  value="树屋">树屋</option>
                    </select>
                </div>
            </div>
            <button type="button" class="btn btn-warning" onclick="initPage()"><i class="glyphicon glyphicon-search"></i> 查询</button>
        </form>
    </div>
</div>
    <div align="center">
        <div id="content">
        <div class="home_conten">
            <ul class="rooms_show_ul">
                <a href="order.html" >
                    <li style="float: left;list-style: none;" >
                        <img class="img_room" src="images/lunbo2.jpg">
                        <div class="rooms_intro">
                            <span class="room_name">123</span><br>
                            <span class="index_price"><em class="bigFont">06</em>222</span>
                        </div>
                    </li>
                </a>
            </ul>
        </div>
        <div class="home_conten">
            <ul>
                <li style="float: left;list-style: none;">
                    <div>
                        <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                        <span class="img_upCover"></span>
                        <div class="rooms_intro">
                            <span class="room_name">123</span>
                            <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                        </div>
                        <a href="order.html" target="_blank" class="room_hover"></a>
                    </div>
                </li>
            </ul>
        </div>
        <div class="home_conten">
            <ul>
                <li style="float: left;list-style: none;">
                    <div>
                        <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                        <span class="img_upCover"></span>
                        <div class="rooms_intro">
                            <span class="room_name">123</span>
                            <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                        </div>
                        <a href="order.html" target="_blank" class="room_hover"></a>
                    </div>
                </li>
            </ul>
        </div>
        <div class="home_conten">
            <ul class="rooms_show_ul">
                <a href="order.html" >
                    <li style="float: left;list-style: none;" >
                        <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                        <span class="img_upCover"></span>
                        <div class="rooms_intro">
                            <span class="room_name">123</span>
                            <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                        </div>
                    </li>
                </a>
            </ul>
        </div>
        </div>
        <div id="content1">
            <div class="home_conten">
                <ul class="rooms_show_ul">
                    <a href="order.html" >
                        <li style="float: left;list-style: none;" >
                            <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                            <span class="img_upCover"></span>
                            <div class="rooms_intro">
                                <span class="room_name">123</span>
                                <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                            </div>
                        </li>
                    </a>
                </ul>
            </div>
            <div class="home_conten">
                <ul>
                    <li style="float: left;list-style: none;">
                        <div>
                            <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                            <span class="img_upCover"></span>
                            <div class="rooms_intro">
                                <span class="room_name">123</span>
                                <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                            </div>
                            <a href="order.html" target="_blank" class="room_hover"></a>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="home_conten">
                <ul>
                    <li style="float: left;list-style: none;">
                        <div>
                            <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                            <span class="img_upCover"></span>
                            <div class="rooms_intro">
                                <span class="room_name">123</span>
                                <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                            </div>
                            <a href="order.html" target="_blank" class="room_hover"></a>
                        </div>
                    </li>
                </ul>
            </div>
            <div class="home_conten">
                <ul class="rooms_show_ul">
                    <a href="order.html" >
                        <li style="float: left;list-style: none;" >
                            <img class="img_room" src="images/lunbo2.jpg" height="326" width="400" >
                            <span class="img_upCover"></span>
                            <div class="rooms_intro">
                                <span class="room_name">123</span>
                                <span class="index_price">
                                <em class="bigFont">06</em>
                                222
                            </span>
                            </div>
                        </li>
                    </a>
                </ul>
            </div>
        </div>
    </div>
<div class="table-responsive">
    <table class="table  table-bordered">
        <tfoot>
        <tr>
            <td align="center">
            <ul class="pagination">
            </ul>
        </tr>
        </tfoot>
    </table>
</div>

<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="script/docs.min.js"></script>

<script>
    function initPage(){
        var pageNum = window.location.search.split("=")[1];
        var requestURL = "listAllAdministrator";
        if(pageNum==null){
            pageNum = 1;
        }else {
            requestURL+="?pageNum="+pageNum;
        }
        $.ajax({
            //请求方式
            type : "POST",
            //请求的媒体类型
            contentType: "application/json;charset=UTF-8",
            //接受数据类型
            dataType:"json",
            //请求地址
            url : "http://localhost:8080//getHouseInfo",
            //数据，json字符串
            data : JSON.stringify(
                {
                    "city": $("#cityInput").val().replace(/\s*!/g,""),
                    "h_type": $("#h_typeInput").val().replace(/\s*/g,""),
                    "pageNum":pageNum
                }
            ),
            //请求成功
            success : function(result) {
                console.log(result);
                if (result.size==0) {
                    alert("您搜索的房屋暂时没有房源");
                    $("#cityInput").val("");
                    $("#h_typeInput").val("");
                    initPage();
                }
                $("#content").html("");
                $("#content1").html("");
                $(result.list).each(function(index,item){
                    if (index<4) {
                        //alert(index);
                        var strs = "<div class=\"home_conten\">";
                        strs += "<a href='order.html?houseid="+item.houseid+"' >";
                        strs += "<li style=\"float: left;list-style: none;\" >";
                        $(item.housePictures).each(function (i,a) {
                            if (i == 0) {
                                strs += "<img class=\"img_room\" src="+a.picture+">"
                            }
                        });
                        strs += "<div class=\"rooms_intro\">";
                        strs += "<span class='room_type'>"+item.h_type+"</span><br>";
                        strs += "<span class='room_type'>"+item.city+"</span><br>";
                        strs += "<span class='room_sketch'>"+item.sketch+"</span><br>";
                        strs += "<span class='index_price'><em class='bigFont'>06</em>"+item.h_price+"</span>";
                        strs += "</div>";
                        strs += "</li>";
                        strs += "</a>";
                        $("#content").append(strs);
                    }else if (index>3) {
                        //alert(index);
                        var strs = "<div class=\"home_conten\">";
                        strs += "<a href='order.html?houseid="+item.houseid+"' >";
                        strs += "<li style=\"float: left;list-style: none;\" >";
                        $(item.housePictures).each(function (j,b) {
                            if (j == 0) {
                                strs += "<img class=\"img_room\" src="+b.picture+">"
                            }
                        });
                        strs += "<div class=\"rooms_intro\">";
                        strs += "<span class='room_type'>"+item.h_type+"</span><br>";
                        strs += "<span class='room_type'>"+item.city+"</span><br>";
                        strs += "<span class='room_sketch'>"+item.sketch+"</span><br>";
                        strs += "<span class='index_price'><em class='bigFont'>06</em>"+item.h_price+"</span>";
                        strs += "</div>";
                        strs += "</li>";
                        strs += "</a>";
                        $("#content1").append(strs);
                    }
                });
                if (pageNum == 1 && result.pages == 1) {
                    var splitePageStr = "<li class=\"disabled\"><a href=\"#\">上一页</a></li>";
                    for (var i = 1; i <= result.pages; i++) {
                        splitePageStr += "<li><a href=\"main.html?pageNum=" + i + "\">" + i + "</a></li>";
                    }
                    splitePageStr += "<li class=\"disabled\"><a href=\"#\">下一页</a></li>";
                    $(".pagination").html("");
                    $(".pagination").append(splitePageStr);
                }  else if (pageNum==1) {
                    var splitePageStr = "<li class=\"disabled\"><a href=\"#\">上一页</a></li>";
                    for (var i = 1; i <= result.pages; i++) {
                        splitePageStr += "<li><a href=\"main.html?pageNum=" + i + "\">" + i + "</a></li>";
                    }
                    splitePageStr += "<li><a href=\"main.html?pageNum=" + (parseInt(pageNum )+ 1) + "\">下一页</a></li>";
                    $(".pagination").html("");
                    $(".pagination").append(splitePageStr);
                } else if (pageNum == result.pages) {
                    var splitePageStr = "<li><a href=\"main.html?pageNum=" + (parseInt(pageNum)-1) + "\">上一页</a></li>";
                    for (var i = 1; i <= result.pages; i++) {
                        splitePageStr += "<li><a href=\"main.html?pageNum=" + i + "\">" + i + "</a></li>";
                    }
                    splitePageStr += "<li class=\"disabled\"><a href=\"#\">下一页</a></li>";
                    $(".pagination").html("");
                    $(".pagination").append(splitePageStr);
                } else {
                    var splitePageStr = "<li><a href=\"main.html?pageNum=" + (parseInt(pageNum)-1) + "\">上一页</a></li>";
                    for (var i = 1; i <= result.pages; i++) {
                        splitePageStr += "<li><a href=\"main.html?pageNum=" + (parseInt(pageNum )+ 1) + "\">" + i + "</a></li>";
                    }
                    splitePageStr += "<li><a href=\"#\">下一页</a></li>";
                    $(".pagination").html("");
                    $(".pagination").append(splitePageStr);
                }
            },
            //请求失败，包含具体的错误信息
            error : function(e){
                console.log(e.status);
                console.log(e.responseText);
            }
        });
    }
    initPage();

    function toOrder(houseid) {
        alert(houseid);
        window.location.href="order.html?houseid="+houseid;
    }

</script>
</body>
</html>